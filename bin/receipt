#!/usr/bin/env ruby

require 'json'

$LOAD_PATH.unshift(File.expand_path('../lib', __dir__)) unless $LOAD_PATH.include?(File.expand_path('../lib', __dir__))

require 'receipt_generator'

def usage!
  warn 'Usage: receipt <path-to-json>'
  exit 1
end

path = ARGV.shift or usage!

begin
  data = JSON.parse(File.read(path))
rescue Errno::ENOENT
  warn "File not found: #{path}"
  exit 1
end

puts ReceiptGenerator.new.from_hash(data)